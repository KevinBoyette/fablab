v: 2

forwarder:
  latencyProbeInterval: 1000

identity:
  cert:                 /home/{{ .Model.MustVariable "credentials" "ssh" "username" }}/fablab/pki/intermediate/certs/{{ .Component.PublicIdentity }}-client.cert
  server_cert:          /home/{{ .Model.MustVariable "credentials" "ssh" "username" }}/fablab/pki/intermediate/certs/{{ .Component.PublicIdentity }}-server.cert
  key:                  /home/{{ .Model.MustVariable "credentials" "ssh" "username" }}/fablab/pki/intermediate/keys/{{ .Component.PublicIdentity }}.key
  ca:                   /home/{{ .Model.MustVariable "credentials" "ssh" "username" }}/fablab/pki/intermediate/certs/{{ .Component.PublicIdentity }}-server.chain.pem

ctrl:
  endpoint:             tls:{{ publicIp "ctrl" "ctrl" }}:6262

listeners:
  - binding:            transport
    address:            tls:0.0.0.0:7001
  - binding:            proxy
    address:            tls:0.0.0.0:7002
    service:            iperf

dialers:
  - binding:            transport